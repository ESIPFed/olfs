<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Servlet Configuration</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<h1 align="center"><a href="http://www.opendap.org"><img src="images/opendap_logo_masthead.gif" width="206" height="93" border="0"></a><br>
OLFS </h1>
<h2 align="center">Servlet Configuration And General Information</h2>
<hr>
<h3>Servlet Configuration </h3>
<p>This document should help you get started configuring the OLFS component of Server4.
  This servlet was developed, compiled, and tested using
  the javac 1.5.0 compiler, the 1.5.0 Java Virtual Machine, and Jakarta Tomcat
  5.5 (which also provided the javax.servlet packages).</p>
<p><strong><em>Note</em></strong>: All Examples of web.xml configurations in
  this document were check against Jakarta Tomcat 5.5.0 </p>
<hr>
<h3><a name="CONFIG"></a>Servlet Configuration
</h3>
<p>The OPeNDAP servlets get their configuration from the servlet's web.xml file.
  The default location of the web.xml file is  (at least in Tomcat 4.1)
  in  <em>$TOMCATHOME/webapps/opendap/WEB-INF </em>(Obviously if the <em>opendap</em> directory
  gets renamed then things change accordingly.)</p>
<p> Each instance of a servlet running
    in the opendap servlet area needs an entry in the web.xml file. Multiple
  instances of a servlet and/or several different servlets can be configured
  in the one
    web.xml file. For instance you can have a DTS and 2 instances of the DRDS
  configured through one web.xml file.</p>
<p>Each instance of a servlet needs a unique name which is specified inside a
  <em>&lt;servlet&gt;</em> element in the web.xml file using the <em>&lt;servlet-name&gt;</em> tag.
  This is a name of convenience, for example if you where serving data from an
  ARGOS satellite you might call that servlet <em>argos</em>.</p>
<p>Additionally each instance of a <em>&lt;servlet&gt;</em> must specify which
  Java class contains the actual servlet to run. This is done in the <em>&lt;servlet-class&gt;</em> element.
  For example the DRDS's class name is <em>opendap.servers.sql.drds</em></p>
<p>Here is a syntax example combining the two previous example values:</p>
<pre>
&lt;servlet&gt;
	&lt;servlet-name&gt;argos&lt;/servlet-name&gt;
	&lt;servlet-class&gt;opendap.olfs.OLFS&lt;/servlet-name&gt;
	.
	.
	.
&lt;/servlet&gt;</pre>
<p>This servlet could then be accessed as:</p>
<blockquote>
  <p> <em>http://hostname/opendap/servlet/argos</em></p>
</blockquote>
<p>You may also add to the end of the <em>web.xml</em> file a set of &lt;servlet-mapping&gt;
  elements. These allow you to abbreviate the URL or the servlet. By placing
   the servlet mappings:</p>
<blockquote>
  <pre> 
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;argos&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/argos&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;argos&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/argos/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</pre>
</blockquote>
<p>At the end of the <em>web.xml</em> file our previous example changes it's URL to:</p>
<blockquote>
  <p><em>http://hostname/opendap/argos</em></p>
</blockquote>
<p>Eliminating the need for the word <em>servlet</em> in the URL. For more on
  the <em>&lt;servlet-mapping&gt;</em> element see the Jakarta-Tomcat documentation.</p>
<h3>&lt;init-param&gt; Elements</h3>
<p>  The  OLFS uses <em>&lt;init-param&gt; </em>elements inside of
  each <em>&lt;servlet&gt;</em> element to get specific configuration information. </p>
<p> <em>&lt;init-param&gt;'s </em> common
  to all OPeNDAP servlets are: </p>
<ul>
<li><strong>DebugOn</strong> - This controls output to the terminal from which
    the servlet engine was launched. The value is a list of flags that turn on
    debugging instrumentation
  in different parts of the code. <br>
  <br>
  Common values are : <em>showRequest, showResponse</em>,
  <em>showException, BES</em>, and<em> probeRequest</em>.<br>
  <br>
    <em>Example:</em>
    <pre>&lt;init-param&gt;
	&lt;param-name&gt;DebugOn&lt;/param-name&gt;
	&lt;param-value&gt;showRequest showResponse&lt;/param-value&gt;
&lt;/init-param&gt;
      </pre>
      <em>Default</em>: If this parameter is
	  not set, or the value field is empty then debugging instrumentation is not
	  turned on.<br>
  </li>
	<br>
  <li>    <strong>BackEndServerHost</strong> - This parameter specifies the IP address or host name of the Back End Server to which the OLFS is going to communicate with to get OPeNDAP data and ancillary information.<br>
    <br>
    <em>Example:</em>
      <pre>&lt;init-param&gt;
	&lt;param-name&gt;BackEndServerHost&lt;/param-name&gt;
	&lt;param-value&gt;127.0.0.1&lt;/param-value&gt;
&lt;/init-param&gt;
</pre>
      <br>
    <em>Default</em>: This parameter <strong>must be set </strong> for the OLFS to function. Server4 is a two component system and a connection to a running BES is required. <br>
    <br>
  </li>
  <li><strong>BackEndServerPort</strong> - This parameter specifies the port number on the Back End Server host to which the OLFS is going to communicate with to get OPeNDAP data and ancillary information.<br>
    <br>
    <em>Example:</em>
      <pre>&lt;init-param&gt;
	&lt;param-name&gt;BackEndServerPort&lt;/param-name&gt;
	&lt;param-value&gt;10002&lt;/param-value&gt;
&lt;/init-param&gt;

</pre>
      <em>Default</em>: This parameter <strong>must be set </strong> for the OLFS to function. Server4 is a two component system and a connection to a running BES is required. <br>
    <br>
  </li>
  <li><strong>OpendapHttpDispatchHandlerImplementation</strong>- This parameter specifies the handler implementation that provides the responses for the HTTP GET commands to the servlet framework. <strong><em>Don't be messin' with this! It's what makes Server4, well, Server4. </em></strong><br>
    <em>Example:</em>
      <pre>
&lt;init-param&gt;
    &lt;param-name&gt;OpendapHttpDispatchHandlerImplementation&lt;/param-name&gt;
    &lt;param-value&gt;opendap.olfs.HttpDispatchHandler&lt;/param-value&gt;
&lt;/init-param&gt;

</pre>
      <em>Default</em>: This parameter <strong>must be set </strong> to the value <strong><em>opendap.olfs.HttpDispatchHandler</em></strong> for the server to actually be an OLFS. <br>
    <br>
  </li>
  <li><strong>OpendapSoapDispatchHandlerImplementation</strong>- This parameter specifies the handler implementation that provides the responses for the HTTP POST commands (via a SOAP interface) to the servlet framework. <strong><em>Don't be messin' with this! It's what makes Server4, well, Server4. </em></strong><br>
    <br>
    <em>Example:</em>
      <pre>
&lt;init-param&gt;
    &lt;param-name&gt;OpendapSoapDispatchHandlerImplementation&lt;/param-name&gt;
    &lt;param-value&gt;opendap.olfs.SoapDispatchHandler&lt;/param-value&gt;
&lt;/init-param&gt;

</pre>
      <em>Default</em>: This parameter <strong>must be set </strong> to the value <strong><em>opendap.olfs.SoapDispatchHandler</em></strong> for the server to actually be an OLFS. <br>
      <br>
</li>
</ul>
<p><strong>Example of web.xml content:</strong></p>
<pre>
&lt;servlet&gt;

  &lt;servlet-name&gt;s4&lt;/servlet-name&gt;
  
  &lt;servlet-class&gt;opendap.coreServlet.DispatchServlet&lt;/servlet-class&gt;
  
  &lt;init-param&gt;
    &lt;param-name&gt;OpendapHttpDispatchHandlerImplementation&lt;/param-name&gt;
    &lt;param-value&gt;opendap.olfs.HttpDispatchHandler&lt;/param-value&gt;
  &lt;/init-param&gt;
  
  &lt;init-param&gt;
    &lt;param-name&gt;OpendapSoapDispatchHandlerImplementation&lt;/param-name&gt;
    &lt;param-value&gt;opendap.olfs.SoapDispatchHandler&lt;/param-value&gt;
  &lt;/init-param&gt;
  
  &lt;init-param&gt;
    &lt;param-name&gt;DebugOn&lt;/param-name&gt;
    &lt;param-value&gt;showRequest probeRequest showResponse CE BES S4Dir ReqState&lt;/param-value&gt;
  &lt;/init-param&gt;

  &lt;init-param&gt;
    &lt;param-name&gt;BackEndServerHost&lt;/param-name&gt;
    &lt;param-value&gt;127.0.0.1&lt;/param-value&gt;
  &lt;/init-param&gt;
  
  &lt;init-param&gt;
    &lt;param-name&gt;BackEndServerPort&lt;/param-name&gt;
    &lt;param-value&gt;10002&lt;/param-value&gt;
  &lt;/init-param&gt;

&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;

&lt;servlet-mapping&gt;
&lt;servlet-name&gt;s4&lt;/servlet-name&gt;
&lt;url-pattern&gt;/s4&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;servlet-mapping&gt;
&lt;servlet-name&gt;s4&lt;/servlet-name&gt;
&lt;url-pattern&gt;/s4/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

</pre>
<hr>
<br>
<br>
</body>
</html>
