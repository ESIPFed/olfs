<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Server: INstallation Guide</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<STYLE>
<!--
H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#527CC1;font-size:22px;}
H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#527CC1;font-size:16px;}
H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#527CC1;font-size:14px;}
BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;}
B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#527CC1;}
P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}
A {color : black;}
A.name {color : black;}
HR {color : #525D76;}
.rightBanner {
	left: 100px;
}
LI {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}
.style3 {font-size: 10px}
.style4 {font-size: 14px}
-->
</STYLE>
<style type="text/css">
<!--
.style1 {
	font-family: "Courier New", Courier, mono;
	font-size: 14px;
}
-->
</style>
</head>

<body>
<a href="http://www.opendap.org"><img src="images/opendap_logo_masthead.gif" alt="OPeNDAP Logo" width="206" height="93" border="0" /></a>
<h1 align="left"> Installation<br />
  <span class="style4">Server4 <span class="style3">(version: beta-1.4)</span></span></h1>
 <hr size="1" noshade="noshade">
<p><em>(Note: Releases 1.0 to 1.3 are alpha releases of Server4 and assume that <br />
  the builder is familiar with OPeNDAP software. Release 1.4 will be a beta <br />
release.</em>)</p>
<p>There are two different components to server4, each of which must be built and installed to get a running server. See the README file for information on the server architecture and roles of the two parts of the server.</p>
<p>What you will need:</p>
<ul>
  <li>  30 minutes</li>
  <li>A <a href="http://subversion.tigris.org/">Subversion</a> client</li>
  <li>C++ compiler</li>
  <li>Java 1.4 or 1.5 Runtime or Development Environment</li>
  <li><a href="http://tomcat.apache.org/">Tomcat 4.1.x or 5.5.x</a> </li>
  <li>Data (netcdf files for version 1.0 of this software)</li>
  <li>A web browser</li>
</ul>
<h2>Part I: Download, build, configure and test the BES</h2>
<p>For this version you will need to get <a href="http://www.opendap.org/download/BES.html#3.2.0">BES version 3.2.0</a></p>
<p>Go to the website, get the stuff, follow the instructions, and come back here when you've got it working. </p>
<p>&nbsp;</p>
<h2>Part II: Setting up the OLFS</h2>
<p>Check out the software for Server4 found at <a href="http://scm.opendap.org:8090/svn/trunk/Server4">http://scm.opendap.org:8090/svn/trunk/Server4</a>. </p>
<p>Change directory to Server4 and
  build the code by issuing the command:</p>
<blockquote>
  <p class="style1">ant -f buildfiles/s4.xml server</p>
</blockquote>
<p>I used ant version 1.6.2
  with Java 1.5.0_06-112. I had to edit the shell script 'ant' and replace '-cp' with
  '-lib'. This is a known issue with these two versions. If you're using Java 1.4
  you should not have to modify the ant script.</p>
<p>Once built, copy the opendap.war file into the Tomcat's <em>webapps</em> directory:</p>
<blockquote>
  <p class="style1"> cp build/dist/opendap.war /usr/local/apache-tomcat-5.5.15/webapps/</p>
</blockquote>
<p>If you're replacing an old copy, make sure that remove the 'opendap' directory 
that Tomcat will have created when it was started. </p>
<p>Configure the Tomcat environment by setting the environment variable CATALINA_HOME to the full
path for the Tomcat distribution.<br />
<br />
In bash:</p>
<blockquote>
  <p class="style1">export CATALINA_HOME =
    /usr/local/apache-tomcat-5.5.15</p>
</blockquote>
<p> In the top level tomcat directory
    (jakarta-tomcat-4.1.31 on my machine) issue the command: </p>
<blockquote>
  <p class="style1"> bin/startup.sh; tail -f logs/catalina.out</p>
</blockquote>
<p>  Wait a few seconds while it all starts up.</p>
<p>&nbsp;</p>
<h3>Part IIB: Configure the OLFS servlet.</h3>
<p><a href="servlet.html">Configuration for the OLFS servlet is here. </a></p>
<p>&nbsp;</p>
<h3>Part IIc: Test the OLFS servlet.</h3>
<p>To test/use the server, open a web browser and open the URL: </p>
<blockquote>
  <p> <a href="http://localhost:8080/" class="style1">http://localhost:8080/</a></p>
</blockquote>
<p>and you should see the Tomcat default page. Open the URL:</p>
<blockquote>
  <p class="style1"><a href="http://localhost:8080/opendap/s4/data/nc/fnoc1.nc.das">http://localhost:8080/opendap/s4/</a></p>
</blockquote>
<p>To see an HTML directory of the top of your data archive. </p>
<p>&nbsp;</p>
<p>You can probably 
  get a THREDDS catalog by appending&quot;catalog.html&quot; to the end of any URL that returns an HTML directory, like so: </p>
<blockquote>
  <p> <a href="http://localhost:8080/opendap/s4/catalog.xml" class="style1">http://localhost:8080/opendap/s4/catalog.xml</a><br />
    <a href="http://localhost:8080/opendap/s4/data/catalog.xml" class="style1">http://localhost:8080/opendap/s4/data/catalog.xml</a><br />
    <a href="http://localhost:8080/opendap/s4/data/nc/catalog.xml" class="style1">http://localhost:8080/opendap/s4/data/nc/catalog.xml</a></p>
</blockquote>
<p>Et cetera.</p>
<p>Usage Note:  If you use ctrl-c to stop watching the tail of the servers output, make sure to run bin/shutdown.sh to 
  shutdown Tomcat. If you don't, you may get errors when you next
try to start the Tomcat server.</p>
<hr size="1" noshade="noshade" />
<h3><br /></h3>
</body>
</html>
